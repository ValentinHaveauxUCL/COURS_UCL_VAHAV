{"version":3,"sources":["webpack:///webpack/bootstrap 1e741300f4bef3ca9a83","webpack:///./app/src/ask-pass/main.ts","webpack:///./app/src/ask-pass/ask-pass.ts","webpack:///./app/src/lib/auth.ts","webpack:///./app/src/lib/stores/token-store.ts","webpack:///./app/node_modules/keytar/lib/keytar.js","webpack:///./app/node_modules/keytar/build/Release/keytar.node"],"names":[],"mappings":"0BACA,cAMA,IACA,iBAGA,mBACA,CACA,IACA,aAIA,mCAGA,aAGA,OACA,OAIA,OAzBA,YA4BA,MAGA,uBACA,GACA,kCACA,CACA,gBACA,cAGA,OAGA,iBACA,YACA,qBAA2B,UAA0B,UACrD,YAAiC,CAAe,QAChD,EAEA,aADA,QAIA,mBAAsD,wCAA+D,SAGrH,MAGA,8BC3DG,8DAEH,UAEA,GAAY,EAAU,QAAK,KAAG,GAC9B,EAAyB,qBAAK,KAAS,KAE5B,aAAO,OACP,iBAAO,OAEhB,M,kFCZF,UACA,OAE2E,GAC3E,EAqBC,kBApBe,iBAEd,MAAc,GAAyB,QAAI,IACxC,oBAAU,IAAI,CAAS,EAClB,aAGL,SAAO,EAAW,WACb,YACF,SAAI,GAAO,EAAW,WAAa,YACvC,MAAc,GAAyB,QAAI,IACxC,oBAAU,IAAI,CAAS,EAClB,aAGR,WAAS,GAAG,EACN,2BAAC,MAAM,GAAU,WACxB,YAEK,OACP,mCCjBiD,aAChD,MAA8C,GAEvC,eAAU,IACnB,OAAC,yCAVoC,WACrC,EAIyC,iBAJQ,WACzC,OAAkB,GAAQ,EACjC,WAGD,EAIC,mGCZD,UAAgC,GAcnB,EAAU,WACd,CACA,QAdiD,eAClD,OAAO,GACd,oBAcA,QAZ0C,aACnC,OAAO,GACd,kBAMyB,WAJoB,aACtC,OAAO,GACd,uCCVD,eACA,QACA,8BAEA,iBAEA,aACA,IACA,qDACA,UAEA,GAEA,KAEA,IACA,EAEA,mBAEA,qBAtBA,WAwBA,UACA,0BACA,YACA,eAEA,oBACA,mBAEA,6BACA,YACA,eACA,eAEA,qBACA,qBAEA,8BACA,YACA,eAEA,oBACA,sBAEA,0BACA,YAEA,oBACA,kBACA,gBCpDA,kB","file":"ask-pass.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1e741300f4bef3ca9a83","/**\n * This will be run by the `ask-pass-trampoline`.\n */\n\nimport { responseForPrompt } from './ask-pass'\n\nconst prompt = process.argv[2]\nresponseForPrompt(prompt).then(response => {\n  if (response) {\n    process.stdout.write(response)\n    process.stdout.end()\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./app/src/ask-pass/main.ts","import { getKeyForEndpoint } from '../lib/auth'\nimport { TokenStore } from '../lib/stores/token-store'\n\n/** Parse the GIT_ASKPASS prompt and determine the appropriate response. */\nexport async function responseForPrompt(\n  prompt: string\n): Promise<string | null> {\n  const username: string | null = process.env.DESKTOP_USERNAME\n  if (!username || !username.length) {\n    return null\n  }\n\n  if (prompt.startsWith('Username')) {\n    return username\n  } else if (prompt.startsWith('Password')) {\n    const endpoint: string | null = process.env.DESKTOP_ENDPOINT\n    if (!endpoint || !endpoint.length) {\n      return null\n    }\n\n    const key = getKeyForEndpoint(endpoint)\n    return await TokenStore.getItem(key, username)\n  }\n\n  return null\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/src/ask-pass/ask-pass.ts","import { Account } from '../models/account'\n\n/** Get the auth key for the user. */\nexport function getKeyForAccount(account: Account): string {\n  return getKeyForEndpoint(account.endpoint)\n}\n\n/** Get the auth key for the endpoint. */\nexport function getKeyForEndpoint(endpoint: string): string {\n  const appName = __DEV__ ? 'GitHub Desktop Dev' : 'GitHub'\n\n  return `${appName} - ${endpoint}`\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/src/lib/auth.ts","import * as keytar from 'keytar'\n\nfunction setItem(key: string, login: string, value: string) {\n  return keytar.setPassword(key, login, value)\n}\n\nfunction getItem(key: string, login: string) {\n  return keytar.getPassword(key, login)\n}\n\nfunction deleteItem(key: string, login: string) {\n  return keytar.deletePassword(key, login)\n}\n\nexport const TokenStore = {\n  setItem,\n  getItem,\n  deleteItem,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/src/lib/stores/token-store.ts","var keytar = require('../build/Release/keytar.node')\n\nfunction checkRequired(val, name) {\n  if (!val || val.length <= 0) {\n    throw new Error(name + ' is required.');\n  }\n}\n\nfunction callbackPromise(callback) {\n  if (typeof callback === 'function') {\n    return new Promise(function(resolve, reject) {\n      callback((err, val) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(val)\n        }\n      })\n    })\n  } else {\n    throw new Error('Callback required')\n  }\n}\n\nmodule.exports = {\n  getPassword: function (service, account) {\n    checkRequired(service, 'Service')\n    checkRequired(account, 'Account')\n\n    return callbackPromise(callback => keytar.getPassword(service, account, callback))\n  },\n\n  setPassword: function (service, account, password) {\n    checkRequired(service, 'Service')\n    checkRequired(account, 'Account')\n    checkRequired(password, 'Password')\n\n    return callbackPromise(callback => keytar.setPassword(service, account, password, callback))\n  },\n\n  deletePassword: function (service, account) {\n    checkRequired(service, 'Service')\n    checkRequired(account, 'Account')\n\n    return callbackPromise(callback => keytar.deletePassword(service, account, callback))\n  },\n\n  findPassword: function (service) {\n    checkRequired(service, 'Service')\n\n    return callbackPromise(callback => keytar.findPassword(service, callback))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/node_modules/keytar/lib/keytar.js\n// module id = 4\n// module chunks = 0","module.exports = __non_webpack_require__(\"./keytar.node\")\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/node_modules/keytar/build/Release/keytar.node\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}